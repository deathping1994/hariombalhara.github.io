---           
layout: post
title: Swiss-Army Knife for TCP/IP
date: 2011-09-06 16:33:21 UTC
updated: 2011-09-06 16:33:21 UTC
comments: false
categories: Ip spoofing Linux Linux Commands netcat port scan webserver
---

<div dir="ltr" style="text-align: left;" trbidi="on"><b>Netcat</b> , also referred to as Swiss-army knife for TCP/IP  , is a computer networking service for reading from and writing network connections using TCP and UDP.<br /><br />Download it  <a href="http://www.downloadnetcat.com/">here</a> for Windows/Linux.<br /><br />Repositories also provide this package<br /><br />For ubuntu just type in terminal:<br /><br /><pre class="php" name="code">sudo apt-get install netcat</pre><br />This tool can be invoked by typing 'nc' or 'netcat' .The arguments and various options to it differ according to its use.<br /><br />Without going into further definitions these are some of the gr8 uses of this tool.<br /><h3><b>A simple Chat</b></h3><br />In one Terminal , type:<br /><pre class="php" name="code">netcat -vvl 127.0.0.1 -p 1400</pre><br />It creates a Listener (-l) which listens at port (-p) 1400 with IP 127.0.0.1 in extra verbose mode (-vv) i.e printing whats happening .<br /><br />-v will also do ,but will be less verbose.<br /><br />Fire up another terminal and type:<br /><pre class="php" name="code">netcat -vv 127.0.0.1 1400</pre><br />It creates a connection to IP 127.0.0.1 i.e. localhost which listens at port 1400 in extra verbose mode (-vv).<br /><br />Now type something and see whatever you type is seen on another terminal.A very simple chat.<br /><h3><b>A simple small webserver</b></h3>Make a scipt:<br /><i> webserver</i><br /><pre class="php" name="code">#!/bin/sh<br />while :<br />do<br />{ echo -ne "HTTP/1.1 200 OK\r\n\r\n";<br /> cat htmlfile.txt;<br />} | nc -vvl -w 2 -p 8080<br />done<br /></pre><br />The script basically runs netcat infinite times..each time sending an HTTP Response "HTTP/1.1 200 OK" along with the data.<br /><br />-w option to netcat or nc  sets the timeout . -w 2 asks to  disconnect after 2 seconds if there is no connection request<br /><br /><i>htmlfile.txt</i><br /><pre class="html" name="code">&lt;html&gt;<br />&lt;head&gt;<br />&lt;title&gt;A simple Webserver&lt;/title&gt;<br />&lt;/head&gt;<br />&lt;body&gt;<br />yeah its working<br />&lt;/body&gt;<br />&lt;/html&gt;<br /></pre><br />Make this script executable<br /><pre class="php" name="code">chmod +x webserver</pre><br />Run the script<br /><pre class="php" name="code">./webserver</pre><br />Open a webbrowser and go to<br /><pre class="php" name="code">http://127.0.0.1:8080</pre><br />A very simple webserver is ready :)<br /><br />Experiment  with it yourself ..<br /><br /><b>PORT SCANNING</b><br /><br />Lets Scan google.com for open ports b/w  1-100<br /><pre class="php" name="code">netcat -vvz -w 1 google.com 1-100</pre><br />-z options make sure no data   is transferred during connection.It is specifically used for port scanning.<br />One thing is for sure  that 80 port is open ,otherwise you can not google which you do everytime :P<br />So check it out yourself ..May be you can find any other port open :)<br /><br /><b>Making any process a server</b><br />Terminal 1:<br /><pre class="php" name="code">nc -l -p 1400 -e /bin/bash</pre><br />-e option makes sure a file is executed (int this case /bin/bash)  when connection is made<br />Terminal 2:<br /><pre class="php" name="code">nc  127.0.0.1 1400</pre><br />This makes a connection at port 1400 to above started listener<br />After successful connection type this command in teminal 2<br /><pre class="php" name="code">pwd</pre><br />You know very well what this command does ..prints the current directory<br />Below is the output in my case on terminal 2:<br /><pre class="php" name="code">/home/hariom/Desktop</pre><br />when pwd is typed.. this text is forwarded to /bin/bash/ for which it is a valid command and the output i.e. the current directory is printed on the terminal 2.<br /><br /><span style="color: black;"><b>IP SPOOFING </b></span><br /><br /><span style="color: black;"><b> </b></span><br /><span style="color: black;"> </span><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lNQnTvuzXNg/TOKAgUrkR9I/AAAAAAAAAEg/K1TEaQnvMBw/s1600/screenshot1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="43" src="http://4.bp.blogspot.com/_lNQnTvuzXNg/TOKAgUrkR9I/AAAAAAAAAEg/K1TEaQnvMBw/s320/screenshot1.png" width="320" /></a></div><br />On  Terminal 1 netcat listens on port 1400<br /><pre class="php" name="code">netcat -vvl -p 1400</pre><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_lNQnTvuzXNg/TOKApiCC0FI/AAAAAAAAAEk/UwlyC3CViFY/s1600/screenshot2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="49" src="http://4.bp.blogspot.com/_lNQnTvuzXNg/TOKApiCC0FI/AAAAAAAAAEk/UwlyC3CViFY/s320/screenshot2.png" width="320" /></a></div><br /><br />On terminal 2 netcat specifies source IP address also by using -s and connects to port 1400 on localhost<br /><br />But first this IP address must be bound with one of your network interfaces<br /><br /><pre class="php" name="code">sudo ifconfig eth0:0 98.137.149.56</pre><br />Now it can be specified as source IP<br /><br /><pre class="php" name="code">netcat -vvs 98.137.149.56 127.0.0.1 1400</pre><br />It can be seen in snapshot of terminal1 that there is a connection from yahoo.com as 98.137.149.56 is its IP. You made a connection from localhost but it shows connection from yahoo.com . gr8:)<br />What's its use??<br />It can be used to test an IP firewall created using iptables<br /><br />These are some of the uses of Netcat there are many more that I leave on the reader to explore :)<br />Happy experimenting with netcat :) :)</div>